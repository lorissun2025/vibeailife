<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­¾æ–‡ä»£å…¥è°ƒè¯•æŒ‡å—</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            background: #f9f9f9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #FF6B6B;
        }
        .code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
        }
        .step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
        }
        .success {
            color: #22c55e;
            font-weight: bold;
        }
        .error {
            color: #ef4444;
            font-weight: bold;
        }
        .warning {
            color: #f59e0b;
            font-weight: bold;
        }
        h1 { color: #FF6B6B; }
        h2 { color: #333; border-bottom: 2px solid #FF6B6B; padding-bottom: 10px; }
        button {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover { background: #ee5a5a; }
        #output {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ç­¾æ–‡ä»£å…¥è°ƒè¯•æŒ‡å—</h1>

    <div class="section">
        <h2>é—®é¢˜ï¼šç­¾æ–‡æ²¡æœ‰ä»£å…¥åˆ° AI å¯¹è¯ä¸­</h2>
        <p>è¿™ä¸ªé¡µé¢å¸®åŠ©ä½ è¯Šæ–­ç­¾æ–‡ä»£å…¥åŠŸèƒ½ä¸ºä»€ä¹ˆæ²¡æœ‰å·¥ä½œã€‚</p>
    </div>

    <div class="step">
        <h3>æ­¥éª¤ 1: æ£€æŸ¥ä»Šæ—¥ç­¾æ–‡</h3>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ£€æŸ¥ä½ ä»Šå¤©æ˜¯å¦å·²ç»æŠ½ç­¾ï¼š</p>
        <button onclick="checkFortune()">ğŸ“œ æ£€æŸ¥ä»Šæ—¥ç­¾æ–‡</button>
        <div id="fortuneOutput"></div>
    </div>

    <div class="step">
        <h3>æ­¥éª¤ 2: æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—</h3>
        <p>æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œå¼€å‘æœåŠ¡å™¨çš„åœ°æ–¹ï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š</p>
        <div class="code">
============================================================
ğŸ“œ ä»Šæ—¥ç­¾æ–‡: æµæ°´ä¸äº‰å…ˆ - æµæ°´ä¸äº‰å…ˆï¼Œäº‰çš„æ˜¯æ»”æ»”ä¸ç»
ğŸ’¬ ç”¨æˆ·æ¶ˆæ¯å†…å®¹: æ—©ä¸Šå¥½ï¼Œä»Šå¤©å¿ƒæƒ…æ€ä¹ˆæ ·ï¼Ÿ
ğŸ’¬ æ˜¯å¦é¦–æ¡æ¶ˆæ¯: true
ğŸ“Š å¯¹è¯å†å²æ¶ˆæ¯æ•°: 1
ğŸš« ç­¾æ–‡æ¬¡æ•°é™åˆ¶: æœªè¾¾ä¸Šé™
âœ… ç­¾æ–‡å¼ºåˆ¶ä»£å…¥ï¼ˆé¦–æ¬¡å¯¹è¯ï¼‰
ğŸ¯ æ˜¯å¦ä»£å…¥ç­¾æ–‡: true åŸå› : é¦–æ¬¡å¯¹è¯å¼ºåˆ¶ä»£å…¥
âœ¨ ç­¾æ–‡ç³»ç»Ÿæç¤ºè¯å·²ç”Ÿæˆï¼Œé•¿åº¦: XXX
ğŸ“ ç­¾æ–‡æç¤ºè¯å†…å®¹: ä»Šæ—¥ç­¾æ–‡æ˜¯"æµæ°´ä¸äº‰å…ˆ"...
============================================================
        </div>
        <p class="warning">âš ï¸ å¦‚æœæœåŠ¡å™¨æ§åˆ¶å°æ²¡æœ‰çœ‹åˆ°è¿™äº›æ—¥å¿—ï¼Œè¯´æ˜è¯·æ±‚æ²¡æœ‰åˆ°è¾¾æœåŠ¡å™¨ã€‚</p>
    </div>

    <div class="step">
        <h3>æ­¥éª¤ 3: æµ‹è¯•ç­¾æ–‡ä»£å…¥</h3>
        <p>æ¸…é™¤ç­¾æ–‡è®°å½•åé‡æ–°æµ‹è¯•ï¼š</p>
        <button onclick="clearFortune()">ğŸ—‘ï¸ æ¸…é™¤ä»Šæ—¥ç­¾æ–‡</button>
        <button onclick="window.location.href='/dashboard')">ğŸ  è¿”å›é¦–é¡µé‡æ–°æŠ½ç­¾</button>
        <div id="clearOutput"></div>
    </div>

    <div class="step">
        <h3>æ­¥éª¤ 4: æ‰‹åŠ¨è§¦å‘ç­¾æ–‡ä»£å…¥</h3>
        <p>å¦‚æœè‡ªåŠ¨ä»£å…¥ä¸å·¥ä½œï¼Œå¯ä»¥æ‰‹åŠ¨å‘é€æµ‹è¯•æ¶ˆæ¯ï¼š</p>
        <div class="code">
åœ¨èŠå¤©è¾“å…¥æ¡†è¾“å…¥ä»¥ä¸‹ä»»æ„ä¸€æ¡æ¶ˆæ¯ï¼š
â€¢ "ä½ å¥½"
â€¢ "æ—©ä¸Šå¥½"
â€¢ "ä»Šå¤©æ„Ÿè§‰å¾ˆç„¦è™‘"
â€¢ "å·¥ä½œå‹åŠ›å¤ªå¤§äº†"
â€¢ "é‡åˆ°äº†ä¸€äº›å›°éš¾"
        </div>
        <p class="success">âœ… è¿™äº›æ¶ˆæ¯åŒ…å«å…³é”®è¯ï¼Œåº”è¯¥ä¼šè§¦å‘ç­¾æ–‡ä»£å…¥</p>
    </div>

    <div class="step">
        <h3>æ­¥éª¤ 5: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°</h3>
        <p>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆæŒ‰ F12ï¼‰ï¼Œåˆ‡æ¢åˆ° Console æ ‡ç­¾ï¼š</p>
        <ul>
            <li>æ£€æŸ¥æ˜¯å¦æœ‰ JavaScript é”™è¯¯</li>
            <li>æ£€æŸ¥ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸï¼ˆNetwork æ ‡ç­¾ï¼‰</li>
            <li>æŸ¥çœ‹ /api/chat/conversations/[id]/messages è¯·æ±‚çš„å“åº”</li>
        </ul>
    </div>

    <div class="section">
        <h2>å¸¸è§é—®é¢˜</h2>
        <dl>
            <dt><b>Q: ä¸ºä»€ä¹ˆæœ‰æ—¶ç­¾æ–‡ä¼šä»£å…¥ï¼Œæœ‰æ—¶ä¸ä¼šï¼Ÿ</b></dt>
            <dd>A: ç­¾æ–‡ä»£å…¥æœ‰ 70% çš„éšæœºæ¦‚ç‡ï¼ˆé¦–æ¡æ¶ˆæ¯é™¤å¤–ï¼‰ã€‚å¦‚æœä¸åŒ…å«å…³é”®è¯ï¼Œæœ‰ 30% çš„æ¦‚ç‡ä¸ä¼šä»£å…¥ã€‚</dd>

            <dt><b>Q: ç­¾æ–‡ä»£å…¥æ¬¡æ•°æœ‰é™åˆ¶å—ï¼Ÿ</b></dt>
            <dd>A: æ˜¯çš„ï¼Œæ¯å¤©æœ€å¤šä»£å…¥ 5 æ¬¡ã€‚è¾¾åˆ°ä¸Šé™åå°±ä¸ä¼šå†ä»£å…¥äº†ã€‚</dd>

            <dt><b>Q: é¦–æ¡æ¶ˆæ¯ä¸€å®šä¼šä»£å…¥ç­¾æ–‡å—ï¼Ÿ</b></dt>
            <dd>A: æ˜¯çš„ï¼Œå¦‚æœæ˜¯æ–°å¯¹è¯çš„ç¬¬ä¸€æ¡æ¶ˆæ¯ï¼Œä¼š 100% å¼ºåˆ¶ä»£å…¥ç­¾æ–‡ï¼ˆå‰ææ˜¯æœªè¾¾åˆ°æ¬¡æ•°ä¸Šé™ï¼‰ã€‚</dd>

            <dt><b>Q: å¦‚ä½•ç¡®è®¤ç­¾æ–‡å·²ä»£å…¥ï¼Ÿ</b></dt>
            <dd>A: AI çš„å›å¤ä¸­ä¼šè‡ªç„¶åœ°æåŠç­¾æ–‡å†…å®¹æˆ–å«ä¹‰ï¼Œä¸ä¼šç”Ÿç¡¬åœ°è¯´"è¿™æ˜¯ä½ çš„ç­¾æ–‡"ã€‚</dd>
        </dl>
    </div>

    <script>
        async function checkFortune() {
            const output = document.getElementById('fortuneOutput');
            output.innerHTML = '<p style="color: blue;">æ­£åœ¨æ£€æŸ¥...</p>';

            try {
                const response = await fetch('/api/fortune/today');
                const data = await response.json();

                if (data.success && data.data) {
                    const fortune = data.data;
                    output.innerHTML = `
                        <p class="success">âœ… å·²æ‰¾åˆ°ä»Šæ—¥ç­¾æ–‡</p>
                        <div class="code">
<strong>æ ‡é¢˜ï¼š</strong>${fortune.title}
<strong>å†…å®¹ï¼š</strong>${fortune.text}
<strong>è§£è¯»ï¼š</strong>${fortune.interpretation}
<strong>é€‚ç”¨åœºæ™¯ï¼š</strong>${fortune.applicableScenarios.join(', ')}
<strong>å·²ä»£å…¥æ¬¡æ•°ï¼š</strong>${fortune.appliedCount || 0}/5
                        </div>
                        <p class="success">âœ… ç­¾æ–‡æ•°æ®æ­£å¸¸ï¼Œå¯ä»¥ç»§ç»­æµ‹è¯•</p>
                    `;
                } else {
                    output.innerHTML = `
                        <p class="warning">âš ï¸ ä»Šæ—¥è¿˜æ²¡æœ‰æŠ½ç­¾</p>
                        <p>è¯·å…ˆå®ŒæˆæŠ½ç­¾æµç¨‹ï¼Œç„¶åå†æµ‹è¯•ç­¾æ–‡ä»£å…¥åŠŸèƒ½ã€‚</p>
                    `;
                }
            } catch (error) {
                output.innerHTML = `<p class="error">âŒ é”™è¯¯: ${error.message}</p>`;
            }
        }

        async function clearFortune() {
            const output = document.getElementById('clearOutput');
            output.innerHTML = '<p style="color: blue;">æ­£åœ¨æ¸…é™¤...</p>';

            try {
                const response = await fetch('/api/fortune/clear', {
                    method: 'POST'
                });
                const data = await response.json();

                if (data.success) {
                    output.innerHTML = `
                        <p class="success">âœ… ${data.message}</p>
                        <p>å·²åˆ é™¤ ${data.deleted} æ¡è®°å½•</p>
                        <p>è¯·ç‚¹å‡»"è¿”å›é¦–é¡µé‡æ–°æŠ½ç­¾"æŒ‰é’®ç»§ç»­æµ‹è¯•</p>
                    `;
                } else {
                    output.innerHTML = `<p class="error">âŒ å¤±è´¥: ${JSON.stringify(data)}</p>`;
                }
            } catch (error) {
                output.innerHTML = `<p class="error">âŒ é”™è¯¯: ${error.message}</p>`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥ç­¾æ–‡
        window.addEventListener('load', () => {
            setTimeout(checkFortune, 500);
        });
    </script>
</body>
</html>
