# VibeAILife 功能验收清单

**版本**: v1.0.0
**验收日期**: 2026-01-22

---

## 🎯 核心功能验收

### 1. 用户认证 & 设置

#### 设置页面 (`http://localhost:3000/settings`)
- [ ] 页面正常加载
- [ ] 可以选择 AI 模型（OpenAI/智谱/自动）
- [ ] 保存设置后刷新页面，设置保持
- [ ] 显示当前计划（FREE/PRO/ENTERPRISE）
- [ ] 显示用户地区
- [ ] 升级到 Pro 按钮可跳转到订阅页面
- [ ] 管理订阅按钮（Pro/Enterprise 用户）

---

### 2. AI 聊天功能

#### 聊天页面 (`http://localhost:3000/chat`)
- [ ] 页面正常加载
- [ ] 左侧显示对话列表
- [ ] 右上角显示当前 AI 模型（智谱/GPT/自动）
- [ ] 右上角有设置齿轮图标，点击跳转到设置
- [ ] 可以切换对话模式（朋友/教练/倾听者）
- [ ] 可以发送消息
- [ ] AI 流式响应正常
- [ ] 可以创建新对话
- [ ] 使用限制提示（免费用户10条/天）

#### 多 LLM 支持
- [ ] 智谱 AI 正常工作（国内用户）
- [ ] OpenAI 正常工作（国际用户）
- [ ] 设置中切换模型后，聊天使用新模型
- [ ] 主提供商失败时自动切换备用提供商

---

### 3. 每日抽签功能

#### 抽签弹窗（进入 Dashboard 自动弹出）
- [ ] 首次进入自动弹出抽签弹窗
- [ ] 可以选择抽签类型（心灵成长/事业/人际关系/随机）
- [ ] 点击类型后开始抽签动画
- [ ] 抽签动画显示3秒
- [ ] 显示签文结果（标题/内容/解读）
- [ ] 可以跳过抽签
- [ ] 抽签后可以重新抽签

#### 签文历史 (`http://localhost:3000/fortune`)
- [ ] 页面显示历史签文列表
- [ ] 显示签文等级（上上签/上签/中签/下签）
- [ ] 显示签文标题和内容
- [ ] 显示抽签日期
- [ ] 显示 AI 代入次数

#### AI 代入签文
- [ ] 抽签后聊天时 AI 会巧妙代入签文
- [ ] 不是每条消息都提及（约40%概率）
- [ ] 签文内容自然融入对话
- [ ] 签文代入次数在历史页面显示
- [ ] 每日最多代入5次

#### Dashboard 签文展示
- [ ] 抽签后 Dashboard 显示今日签文卡片
- [ ] 卡片显示签文标题、内容、解读
- [ ] 有"查看历史"链接

---

### 4. Vibe 情绪追踪

#### Vibe 记录（Dashboard 集成）
- [ ] Dashboard 有"记录 Vibe"卡片
- [ ] 点击后展开 Vibe 记录表单
- [ ] 可以选择心情（1-5星，带表情）
- [ ] 可以选择精力（1-5星，带表情）
- [ ] 可以选择标签（工作、学习、运动等）
- [ ] 可以添加备注
- [ ] 保存后显示 AI 分析反馈
- [ ] 保存后刷新推荐

#### Vibe 历史 (`http://localhost:3000/vibe`)
- [ ] 页面显示 Vibe 趋势概览
  - [ ] 平均心情/精力/Vibe得分
  - [ ] 7日趋势（向好/下降/稳定）
- [ ] 趋势图表显示近7天数据
- [ ] 历史记录列表
  - [ ] 显示心情和精力等级
  - [ ] 显示标签
  - [ ] 显示备注
  - [ ] 显示 AI 分析反馈
  - [ ] 显示时间戳
- [ ] 使用限制（免费用户5条/天）

---

### 5. 目标管理

#### 目标管理页面 (`http://localhost:3000/goals`)
- [ ] 页面正常加载
- [ ] 显示目标列表
- [ ] 可以创建新目标
  - [ ] 输入标题
  - [ ] 添加描述（可选）
- [ ] 显示目标进度条（0-100%）
- [ ] 可以签到（每次+10%）
- [ ] 可以删除目标
- [ ] 可以标记为完成
- [ ] 显示目标状态（进行中/已完成/已暂停/已取消）
- [ ] 显示截止日期

---

### 6. 订阅支付

#### 订阅页面 (`http://localhost:3000/subscription`)
- [ ] 显示三个计划卡片（免费版/Pro/企业版）
- [ ] 每个计划显示功能列表
- [ ] Pro 版标记为"推荐"
- [ ] 点击"选择此计划"跳转到 Stripe Checkout
- [ ] 显示常见问题（FAQ）
- [ ] 完整的定价信息

#### 支付流程
- [ ] Stripe Checkout 正常创建
- [ ] 支付成功后跳转回应用
- [ ] 订阅状态更新
- [ ] 可以管理订阅（取消/更新）

---

### 7. 智能推荐

#### Dashboard 推荐卡片
- [ ] Dashboard 显示"为你推荐"卡片
- [ ] 基于用户状态生成推荐
- [ ] 推荐包括标题和描述
- [ ] 最多显示3条推荐
- [ ] 推荐类型：
  - [ ] Vibe 提示（低心情/低精力）
  - [ ] 目标建议（进度缓慢/即将到期）
  - [ ] 签文提醒（未抽签）

---

## 🔧 技术验收

### API 接口

#### 用户设置
- [ ] `GET /api/user/settings` - 获取设置
- [ ] `PUT /api/user/settings` - 更新设置

#### 聊天
- [ ] `GET /api/chat/conversations` - 获取对话列表
- [ ] `POST /api/chat/conversations` - 创建对话
- [ ] `POST /api/chat/conversations/[id]/messages` - 发送消息

#### 签文
- [ ] `GET /api/fortune/today` - 查询今日签文
- [ ] `POST /api/fortune/draw` - 抽签
- [ ] `POST /api/fortune/skip` - 跳过
- [ ] `GET /api/fortune/history` - 签文历史

#### Vibe
- [ ] `GET /api/vibe` - 获取 Vibe 记录
- [ ] `POST /api/vibe` - 创建 Vibe 记录
- [ ] `GET /api/vibe/trends` - 获取趋势分析

#### 目标
- [ ] `GET /api/goals` - 获取目标列表
- [ ] `POST /api/goals` - 创建目标
- [ ] `POST /api/goals/[id]/checkin` - 签到
- [ ] `PATCH /api/goals/[id]` - 更新目标
- [ ] `DELETE /api/goals/[id]` - 删除目标

#### 订阅
- [ ] `POST /api/subscription/create-checkout` - 创建支付会话
- [ ] `GET /api/subscription/manage` - 获取订阅管理链接

#### 推荐
- [ ] `GET /api/recommendations` - 获取推荐

---

### 数据库

#### Prisma Schema
- [ ] 所有表结构正确
- [ ] 关系定义正确
- [ ] 索引设置合理
- [ ] 枚举值定义完整

#### 数据完整性
- [ ] 用户-签文关系正确
- [ ] 用户-目标关系正确
- [ ] 使用限制记录准确
- [ ] 外键约束正确

---

## 🎨 UI/UX 验收

### 通用
- [ ] 所有页面响应式设计正常
- [ ] 暗色模式支持
- [ ] 字体大小合适
- [ ] 颜色对比度足够
- [ ] 动画流畅不卡顿

### 交互
- [ ] 按钮点击反馈及时
- [ ] 表单验证清晰
- [ ] 加载状态显示
- [ ] 错误提示友好
- [ ] Toast 通知正常

### 页面跳转
- [ ] 所有链接可点击
- [ ] 返回按钮正常工作
- [ ] 页面切换流畅

---

## 📊 性能验收

### 响应时间
- [ ] 页面加载时间 < 2秒
- [ ] API 响应时间 < 500ms
- [ ] 数据库查询优化

### 代码质量
- [ ] TypeScript 无类型错误
- [ ] ESLint 无警告
- [ ] 代码结构清晰
- [ ] 注释充分

---

## ✅ 验收步骤

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **访问主页**
   - http://localhost:3000 → 自动跳转到 Dashboard

3. **验收核心功能**
   - 按照上述清单逐项验收
   - 记录发现的问题

4. **测试 API**
   - 使用 Postman 或 curl 测试所有接口
   - 验证数据格式和错误处理

5. **检查数据库**
   - 登录 Supabase 查看数据
   - 验证所有表和关系正确

---

## 📝 问题记录

验收过程中发现的问题：

| # | 问题描述 | 优先级 | 状态 |
|---|---------|-------|------|
| 1 | （示例） | 高 | 待修复 |

---

## 🎉 验收结论

- [ ] 通过验收，可以发布
- [ ] 需要修复问题后再验收

验收人签字: _______________
日期: _______________

---

**备注**:
- 部分功能需要配置环境变量（Stripe、OpenAI 等）
- 测试时使用的是测试用户 (test-user)
- 部分功能需要升级到 Pro 才能完整体验
